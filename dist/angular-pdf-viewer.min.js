function delegateService(e){return["$log",function(t){function n(e){this.handle=e}var o=this,a=this._instances=[];this._registerInstance=function(e,t){return e.$$delegateHandle=t,a.push(e),function(){var t=a.indexOf(e);-1!==t&&a.splice(t,1)}},this.$getByHandle=function(e){return e?new n(e):o},e.forEach(function(e){n.prototype[e]=function(){var n,o,r=this.handle,l=arguments,i=0;return a.forEach(function(t){t.$$delegateHandle===r&&(i++,o=t[e].apply(t,l),1===i&&(n=o))}),i?n:t.warn('Delegate for handle "'+this.handle+'" could not find a corresponding element with delegate-handle="'+this.handle+'"! '+e+"() was not called!\nPossible cause: If you are calling "+e+'() immediately, and your element with delegate-handle="'+this.handle+'" is a child of your controller, then your element may not be compiled yet. Put a $timeout around your call to '+e+"() and try again.")},o[e]=function(){var t,n,o=arguments;return a.forEach(function(a,r){n=a[e].apply(a,o),0===r&&(t=n)}),t}})}]}angular.module("pdf",[]).service("pdfDelegate",delegateService(["prev","next","zoomIn","zoomOut","rotate","getPageCount","getCurrentPage","goToPage","load"])),angular.module("pdf").controller("PdfCtrl",["$scope","$element","$attrs","pdfDelegate","$log",function(e,t,n,o,a){var r=o._registerInstance(this,n.delegateHandle);e.$on("$destroy",r);var l,i=this,d=e.$eval(n.url),u=n.width?n.width:void 0,c=e.$eval(n.headers);e.pageCount=0;var g=1,s=0,f=n.scale?n.scale:1,p=t.find("canvas")[0],h=p.getContext("2d"),v=function(e){angular.isNumber(e)||(e=parseInt(e)),l.getPage(e).then(function(e){var t=void 0;void 0!=u?(t=e.getViewport(u/e.getViewport(f).width),p.height=t.height,p.width=u):(t=e.getViewport(f),p.height=t.height,p.width=t.width);var n={canvasContext:h,viewport:t};e.render(n)})},m=function(){p.style.webkitTransform="rotate("+s+"deg)",p.style.MozTransform="rotate("+s+"deg)",p.style.msTransform="rotate("+s+"deg)",p.style.OTransform="rotate("+s+"deg)",p.style.transform="rotate("+s+"deg)"};i.prev=function(){1>=g||(g=parseInt(g,10)-1,v(g))},i.next=function(){g>=l.numPages||(g=parseInt(g,10)+1,v(g))},i.zoomIn=function(){return f=parseFloat(f)+.2,v(g),f},i.zoomOut=function(){return f=parseFloat(f)-.2,v(g),f},i.rotate=function(){s=0===s?90:90===s?180:180===s?270:0,m()},i.getPageCount=function(){return e.pageCount},i.getCurrentPage=function(){return g},i.goToPage=function(e){null!==l&&(g=e,v(e))},i.load=function(t){t&&(d=t);var n={};c?(n.url=d,n.httpHeaders=c):n.url=d,PDFJS.getDocument(n).then(function(t){l=t,v(1),e.$apply(function(){e.pageCount=t.numPages})},a.error)},i.load()}]),angular.module("pdf").directive("pdfViewerToolbar",["pdfDelegate",function(e){return{restrict:"E",template:'<div class="col-xs-12 col-md-6 col-md-offset-3"> <div class="row">   <button class="btn btn-info col-xs-3" ng-click="prev()" ng-disable="disablePrev()">Previous</button>   <span class="col-xs-6">     <div class="row">       <p class="col-xs-12 col-md-8 col-md-offset-2 text-center ng-binding">Page {{currentPage}} of {{pageCount}}</p>     </div>   </span>   <button class="btn btn-primary col-xs-3" ng-click="next()" ng-disable="disableNext()">Next</button> </div></div>',scope:{pageCount:"="},link:function(t,n,o){var a=o.delegateHandle;t.currentPage=1,t.prev=function(){e.$getByHandle(a).prev(),r()},t.next=function(){e.$getByHandle(a).next(),r()},t.zoomIn=function(){e.$getByHandle(a).zoomIn()},t.zoomOut=function(){e.$getByHandle(a).zoomOut()},t.rotate=function(){e.$getByHandle(a).rotate()},t.goToPage=function(){e.$getByHandle(a).goToPage(t.currentPage)};var r=function(){t.currentPage=e.$getByHandle(a).getCurrentPage()}}}}]),angular.module("pdf").directive("pdfViewer",["$window","$log","pdfDelegate",function(){return{restrict:"E",template:'<pdf-viewer-toolbar ng-if="showToolbar && toolbarTop" delegate-handle="{{id}}" page-count="pageCount"></pdf-viewer-toolbar> <canvas></canvas> <pdf-viewer-toolbar ng-if="showToolbar && !toolbarTop" delegate-handle="{{id}}" page-count="pageCount"></pdf-viewer-toolbar>',scope:!0,controller:"PdfCtrl",link:function(e,t,n){e.id=n.delegateHandle,e.showToolbar=e.$eval(n.showToolbar)||!1}}}]);